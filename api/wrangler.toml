name = "crxreview-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "3b9dc4b896846934ef0221d509a182c7"

# KV Namespace bindings
[[kv_namespaces]]
binding = "SESSIONS"
id = "728ebacb357143778b41b927e24b0f65"

[[kv_namespaces]]
binding = "CACHE"
id = "788cd13f03b94d428c4e778f854734bc"

# R2 bucket bindings
[[r2_buckets]]
binding = "CRX_STORAGE"
bucket_name = "crxreview-storage"
preview_bucket_name = "crxreview-storage-preview"

# Environment variables
[env.production]
vars = { SESSION_TTL = "1800", MAX_FILE_SIZE = "157286400", RATE_LIMIT_DOWNLOAD = "10", API_VERSION = "1.0.0" }

[env.preview]
vars = { SESSION_TTL = "1800", MAX_FILE_SIZE = "157286400", RATE_LIMIT_DOWNLOAD = "10", API_VERSION = "1.0.0-preview" }

# Triggers - Run cleanup every 6 hours
[triggers]
crons = ["0 */6 * * *"]

# Routes
[[routes]]
pattern = "crxreview-api.privatelink.io/*"
zone_name = "privatelink.io"

# Build configuration
# [build]
# command = "npm run build"
# cwd = "./"

# Observability
[observability]
enabled = true

# Limits - Requires paid plan
# [limits]
# cpu_ms = 50
